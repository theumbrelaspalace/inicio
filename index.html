<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Umbrella's Palace</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
body {
    font-family: 'Inter', sans-serif;
    background-color: #f0f4f8; /* Un color de fondo suave */
}
.gradient-bg {
    background: linear-gradient(to right, #6a11cb 0%, #2575fc 100%); /* Purple to Blue gradient */
}
.text-gradient {
    background: linear-gradient(to right, #6a11cb 0%, #2575fc 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}
.product-image-container {
    position: relative;
    width: 100%;
    height: 12rem; /* h-48 de Tailwind */
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #e2e8f0; /* Light gray background for placeholder */
    border-radius: 0.5rem; /* Matches rounded-lg */
    overflow: hidden;
}
.product-image-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: opacity 0.3s ease-in-out;
}
/* Estilos para el modal de términos y condiciones */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}
.modal-content {
    background-color: white;
    padding: 2rem;
    border-radius: 0.75rem;
    box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
    max-width: 900px; /* Ancho máximo para el contenido */
    max-height: 90vh; /* Altura máxima para el scroll */
    overflow-y: auto; /* Scroll si el contenido es muy largo */
    position: relative;
}
.modal-close-button {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: #333;
}
</style>
</head>
<body class="flex flex-col min-h-screen">
    <header class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6 shadow-lg rounded-b-xl">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center">
            <div class="flex items-center mb-4 md:mb-0">
                <img src="logolila.jpg" alt="Logo The Umbrella's Palace" class="h-16 w-16 mr-3 rounded-full shadow-md">
                <h1 class="text-4xl font-extrabold text-center md:text-left">The Umbrella's Palace</h1>
            </div>
            <nav class="text-lg">
                <ul class="flex space-x-6">
                    <li><a href="#productos" class="hover:text-blue-200 transition duration-300">Productos</a></li>
                    <li><a href="#gemini-feature" class="hover:text-blue-200 transition duration-300">Encuentra tu Sombrilla Ideal ✨</a></li>
                    <li><a href="#contacto" class="hover:text-blue-200 transition duration-300">Contacto</a></li>
                    <li><a href="#redes" class="hover:text-blue-200 transition duration-300">Redes Sociales</a></li>
                    <li><a href="#" id="open-terms-modal" class="hover:text-blue-200 transition duration-300">Términos y Condiciones</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="flex-grow container mx-auto p-6 mt-8">
        <section class="bg-white p-8 rounded-2xl shadow-xl mb-12 text-center">
            <h2 class="text-5xl font-bold text-gray-800 mb-6">¡Tu Refugio Bajo la Lluvia y el Sol!</h2>
            <p class="text-xl text-gray-600 mb-8 max-w-3xl mx-auto">
                En The Umbrella's Palace, ofrecemos la más fina selección de sombrillas en Querétaro.
                Desde diseños elegantes hasta los más resistentes, tenemos la sombrilla perfecta para ti.
            </p>
            <img src="amarillopromo.jpg" alt="Promoción de sombrillas, compra 2 y llévate 1 gratis" class="w-full h-auto rounded-xl shadow-md mb-8 mx-auto max-w-4xl object-cover">
            
            <p class="text-sm text-gray-500 mt-4 mb-8 max-w-3xl mx-auto">
                Válido solo en compras mayores a $1,200 MXN del 20 de julio al 10 de agosto de 2025.<br>
                Aplican restricciones. <a href="#" id="open-terms-modal-inline" class="text-blue-600 hover:underline">Consulta términos</a> en <a href="promociones.html" target="_blank" class="text-blue-600 hover:underline">www.umbrellaspalace.com/promociones</a>

            </p>

            <a href="#productos" class="inline-block bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                Explora Nuestros Productos
            </a>
        </section>

        <section class="mb-12 p-6 bg-blue-50 rounded-lg shadow-md">
            <h3 class="text-3xl font-bold text-center mb-6 text-gradient">Nuestra Propuesta de Valor</h3>
            <p class="text-gray-700 text-lg leading-relaxed text-center max-w-3xl mx-auto">
                Ofrecemos sombrillas de diseño exclusivo, duraderas, con protección UV avanzada, ideales para toda ocasión.
                Fusionamos estilo, funcionalidad y sustentabilidad en cada pieza, brindando una experiencia de compra premium
                desde la comodidad de tu hogar.
            </p>
        </section>

        <section id="productos" class="bg-white p-8 rounded-2xl shadow-xl mb-12">
            <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">Nuestra Colección de Sombrillas</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-gray-50 p-6 rounded-xl shadow-md text-center transform hover:scale-105 transition duration-300">
                    <div class="product-image-container">
                        <img src="Clasica.PNG" alt="Sombrilla clásica elegante azul" class="w-full h-48 object-cover rounded-lg mb-4">
                    </div>
                    <h3 class="text-2xl font-semibold text-gray-700 mb-2">Sombrilla Clásica Elegante</h3>
                    <p class="text-gray-600 mb-4">Perfecta para cualquier ocasión, resistente y con estilo atemporal.</p>
                    <span class="text-xl font-bold text-blue-600">$350 MXN</span>
                </div>
                <div class="bg-gray-50 p-6 rounded-xl shadow-md text-center transform hover:scale-105 transition duration-300">
                    <div class="product-image-container">
                        <img src="Viajera.PNG" alt="Sombrilla compacta de viaje morada" class="w-full h-48 object-cover rounded-lg mb-4">
                    </div>
                    <h3 class="text-2xl font-semibold text-gray-700 mb-2">Sombrilla Compacta de Viaje</h3>
                    <p class="text-gray-600 mb-4">Ligera y fácil de llevar, ideal para tus aventuras diarias.</p>
                    <span class="text-xl font-bold text-blue-600">$280 MXN</span>
                </div>
                <div class="bg-gray-50 p-6 rounded-xl shadow-md text-center transform hover:scale-105 transition duration-300">
                    <div class="product-image-container">
                        <img src="Innovadora.PNG" alt="Sombrilla invertida innovadora rosa" class="w-full h-48 object-cover rounded-lg mb-4">
                    </div>
                    <h3 class="text-2xl font-semibold text-gray-700 mb-2">Sombrilla Invertida Innovadora</h3>
                    <p class="text-gray-600 mb-4">Diseño único que te mantiene seco al entrar y salir del auto.</p>
                    <span class="text-xl font-bold text-blue-600">$420 MXN</span>
                </div>
            </div>
        </section>

        <section id="gemini-feature" class="bg-gradient-to-br from-purple-500 to-pink-500 p-8 rounded-2xl shadow-xl mb-12 text-center text-white">
            <h2 class="text-4xl font-bold mb-6">Encuentra Tu Sombrilla Ideal ✨</h2>
            <p class="text-xl mb-6 max-w-3xl mx-auto">
                Describe qué tipo de sombrilla necesitas (ej. "una sombrilla para la lluvia fuerte y el viento" o "una sombrilla pequeña para viajar")
                y nuestro asistente inteligente te recomendará la mejor opción de nuestra colección.
            </p>
            <div class="flex flex-col items-center space-y-4">
                <input type="text" id="umbrella-needs" placeholder="Describe tus necesidades aquí..."
                    class="w-full md:w-2/3 p-3 rounded-lg shadow-inner text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-400">
                <button id="recommend-button"
                    class="bg-white text-purple-600 font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 transform hover:scale-105 hover:bg-gray-100">
                    Recomendar Sombrilla ✨
                </button>
                <div id="recommendation-result" class="mt-6 text-lg bg-white bg-opacity-20 p-4 rounded-lg shadow-md w-full md:w-2/3 text-left hidden">
                    <p class="font-semibold mb-2">Nuestra recomendación:</p>
                    <p id="recommendation-text"></p>
                </div>
                <div id="loading-indicator" class="hidden mt-4 text-white text-lg">
                    Cargando recomendación...
                </div>
            </div>
        </section>

        <section id="contacto" class="bg-white p-8 rounded-2xl shadow-xl mb-12 text-center">
            <h2 class="text-4xl font-bold text-gray-800 mb-6">Contáctanos</h2>
            <p class="text-xl text-gray-600 mb-4">¿Tienes preguntas o necesitas ayuda para elegir tu sombrilla?</p>
            <p class="text-3xl font-extrabold text-blue-600 mb-6">Teléfono: 555000223</p>
            <p class="text-lg text-gray-700">Estamos ubicados en Querétaro y listos para atenderte.</p>
        </section>

        <section id="redes" class="bg-white p-8 rounded-2xl shadow-xl text-center">
            <h2 class="text-4xl font-bold text-gray-800 mb-6">Síguenos en Redes Sociales</h2>
            <p class="text-xl text-gray-600 mb-8">Mantente al día con nuestras novedades, ofertas y nuevos productos.</p>
            <div class="flex justify-center space-x-8">
                <a href="https://www.instagram.com/theumbrellaspalace?igsh=MTI0ODR4bWRyNDBrZQ%3D%3D&utm_source=qr" target="_blank" rel="noopener noreferrer" class="text-purple-600 hover:text-purple-800 transition duration-300 transform hover:scale-110">
                    <i class="fab fa-instagram text-6xl"></i>
                    <span class="block text-lg font-medium mt-2">Instagram</span>
                </a>
                <a href="http://tiktok.com/@theumbrellaspalace" target="_blank" rel="noopener noreferrer" class="text-black hover:text-gray-700 transition duration-300 transform hover:scale-110">
                    <i class="fab fa-tiktok text-6xl"></i>
                    <span class="block text-lg font-medium mt-2">TikTok</span>
                </a>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white p-6 mt-12 rounded-t-xl shadow-inner">
        <div class="container mx-auto text-center text-gray-400">
            &copy; 2025 The Umbrella's Palace. Todos los derechos reservados.
        </div>
    </footer>

    <div id="message-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-6 rounded-lg shadow-xl max-w-sm w-full text-center">
            <p id="modal-message-text" class="text-lg text-gray-800 mb-4"></p>
            <button id="modal-close-button" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-full transition duration-300">
                Aceptar
            </button>
        </div>
    </div>

    <div id="terms-modal" class="modal-overlay hidden" role="dialog" aria-modal="true">
        <div class="modal-content">
            <button class="modal-close-button" id="close-terms-modal">&times;</button>
            <h2 class="text-3xl font-bold text-gray-800 mb-4 text-center">TÉRMINOS Y CONDICIONES DE LA PROMOCIÓN “LLUVIA DE ESTILO”</h2>
            <div class="text-sm text-gray-700 space-y-4 text-justify">
                <p><strong>The Umbrella’s Palace</strong> – <a href="http://www.umbrellaspalace.com/promociones" target="_blank" class="text-blue-600 hover:underline">www.umbrellaspalace.com/promociones</a></p>

                <p><strong>Vigencia de la promoción:</strong> Del 20 de julio al 10 de agosto de 2025 o hasta agotar existencias.</p>

                <p><strong>Descripción de la promoción:</strong> Por la compra de dos (2) sombrillas en una sola transacción, el cliente recibirá una (1) sombrilla adicional sin costo.</p>
                <ul class="list-disc list-inside text-gray-700 mb-4 ml-4">
                    <li>Válido solo para productos seleccionados en la categoría “Promoción”.</li>
                    <li>No acumulable con otras ofertas o cupones.</li>
                    <li>El producto gratis será asignado automáticamente al solicitar su pedido mediante mensaje WhatsApp al número indicado en el contacto: <a href="tel:+52555000223" class="text-blue-600 hover:underline">+52 55 500 0223</a> o DM a nuestras redes sociales de <a href="https://www.instagram.com/theumbrellaspalace?igsh=MTI0ODR4bWRyNDBrZQ%3D%3D&utm_source=qr" target="_blank" class="text-blue-600 hover:underline">Instagram</a> y <a href="http://tiktok.com/@theumbrellaspalace" target="_blank" class="text-blue-600 hover:underline">TikTok</a> señaladas en nuestro sitio web: <a href="https://theumbrelaspalace.github.io/inicio/" target="_blank" class="text-blue-600 hover:underline">https://theumbrelaspalace.github.io/inicio/</a></li>
                </ul>

                <p><strong>Restricciones:</strong></p>
                <ul class="list-disc list-inside text-gray-700 mb-4 ml-4">
                    <li>Aplicable exclusivamente en compras en línea dentro del territorio mexicano.</li>
                    <li>Límite de una promoción por cliente.</li>
                    <li>El artículo gratuito no es canjeable por efectivo ni intercambiable.</li>
                    <li>En caso de devolución parcial de la compra, el cliente perderá el derecho al artículo gratuito y este deberá ser devuelto en condiciones originales.</li>
                </ul>

                <h3 class="text-xl font-semibold text-gray-800 mb-2">PIEZA INFORMATIVA AL CONSUMIDOR</h3>
                <h4 class="text-lg font-medium text-gray-800 mb-1">Características del producto:</h4>
                <ul class="list-disc list-inside text-gray-700 mb-4 ml-4">
                    <li>Material: Poliéster reciclado con protección UV50+</li>
                    <li>Medidas: 95 cm diámetro abierto</li>
                    <li>Colores disponibles: Azul, Morado, y Rosa.</li>
                    <li>Origen: Hecho en México</li>
                    <li>Garantía: 12 meses por defectos de fabricación</li>
                    <li>Instrucciones de cuidado: Limpiar con paño húmedo, no usar solventes, secar al aire</li>
                </ul>

                <h4 class="text-lg font-medium text-gray-800 mb-1">Advertencias:</h4>
                <ul class="list-disc list-inside text-gray-700 mb-4 ml-4">
                    <li>No usar en condiciones climáticas extremas (viento fuerte o tormentas eléctricas).</li>
                    <li>Producto para uso personal, no profesional.</li>
                </ul>

                <h3 class="text-xl font-semibold text-gray-800 mb-2">FUNDAMENTO LEGAL Y DERECHOS DEL CONSUMIDOR</h3>
                <p class="text-gray-700 mb-2">La promoción y las condiciones de esta campaña cumplen con los lineamientos establecidos por la legislación mexicana:</p>
                <h4 class="text-lg font-medium text-gray-800 mb-1">Leyes aplicables:</h4>
                <ul class="list-disc list-inside text-gray-700 mb-4 ml-4">
                    <li><strong>Ley Federal de Protección al Consumidor</strong></li>
                    <ul class="list-circle list-inside ml-8">
                        <li>Artículo 7: El proveedor debe respetar los términos, condiciones, precios y garantías anunciadas.</li>
                        <li>Artículo 32: La información y publicidad debe ser clara, veraz y comprobable.</li>
                    </ul>
                    <li><strong>Ley de la Propiedad Industrial</strong></li>
                    <ul class="list-circle list-inside ml-8">
                        <li>Artículo 88: La marca registrada protege signos distintivos relacionados con productos o servicios.</li>
                    </ul>
                    <li><strong>Norma Oficial Mexicana NOM-050-SCFI-2004</strong></li>
                    <ul class="list-circle list-inside ml-8">
                        <li>Sobre información comercial y etiquetado para productos de consumo duradero.</li>
                    </ul>
                </ul>

                <h4 class="text-lg font-medium text-gray-800 mb-1">Requisitos legales cumplidos en esta promoción:</h4>
                <ul class="list-disc list-inside text-gray-700 mb-4 ml-4">
                    <li>Información clara sobre vigencia, restricciones y aplicación</li>
                    <li>Promoción visible antes del pago</li>
                    <li>Pieza informativa detallada del producto</li>
                    <li>Uso exclusivo de marca registrada: The Umbrella’s Palace®</li>
                </ul>

                <h3 class="text-xl font-semibold text-gray-800 mb-2">Contacto:</h3>
                <p class="text-gray-700 mb-6">Si tienes dudas sobre la promoción, mándanos WhatsApp al teléfono: <a href="tel:+52555000223" class="text-blue-600 hover:underline">+52 55 500 0223</a> o DM a nuestras redes sociales de <a href="https://www.instagram.com/theumbrellaspalace?igsh=MTI0ODR4bWRyNDBrZQ%3D%3D&utm_source=qr" target="_blank" class="text-blue-600 hover:underline">Instagram</a> y <a href="http://tiktok.com/@theumbrellaspalace" target="_blank" class="text-blue-600 hover:underline">TikTok</a>.</p>

                <p class="text-gray-700 text-sm italic text-center">Este sitio y promoción son operados por Umbrella’s Palace S.A. de C.V., con domicilio fiscal en Querétaro, México.</p>
            </div>
            <div class="text-center mt-6">
                <button id="modal-close-button-terms" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-full transition duration-300">
                    Aceptar y cerrar
                </button>
            </div>
        </div>
    </div>

    <script type="module">
        // Function to show custom message box (for general messages)
        function showMessage(message) {
            const messageModal = document.getElementById('message-modal');
            const modalMessageText = document.getElementById('modal-message-text');
            modalMessageText.textContent = message;
            messageModal.classList.remove('hidden');
        }

        // Event listener for custom message box close button
        document.getElementById('modal-close-button').addEventListener('click', () => {
            document.getElementById('message-modal').classList.add('hidden');
        });

        // Event listener for clicking outside the message modal to close it
        document.getElementById('message-modal').addEventListener('click', (event) => {
            if (event.target === document.getElementById('message-modal')) {
                document.getElementById('message-modal').classList.add('hidden');
            }
        });

        // ===============================================
        // JAVASCRIPT UNIFICADO PARA EL MODAL DE TÉRMINOS
        // ===============================================
        const termsModal = document.getElementById('terms-modal');
        const openTermsButtonMenu = document.getElementById('open-terms-modal');
        const openTermsButtonInline = document.getElementById('open-terms-modal-inline');
        const closeTermsButton = document.getElementById('close-terms-modal');
        const closeTermsButtonBottom = document.getElementById('modal-close-button-terms'); // Nuevo botón de cierre al final

        function openTermsModal() {
            termsModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Bloquear el scroll del body
        }

        function closeTermsModal() {
            termsModal.classList.add('hidden');
            document.body.style.overflow = ''; // Habilitar el scroll del body
        }

        // Abrir modal desde el menú
        openTermsButtonMenu.addEventListener('click', (e) => {
            e.preventDefault();
            openTermsModal();
        });

        // Abrir modal desde el enlace inline en la leyenda
        openTermsButtonInline.addEventListener('click', (e) => {
            e.preventDefault();
            openTermsModal();
        });

        // Cerrar modal con el botón X (arriba a la derecha)
        closeTermsButton.addEventListener('click', closeTermsModal);

        // Cerrar modal con el botón "Aceptar y cerrar" (al final del modal)
        closeTermsButtonBottom.addEventListener('click', closeTermsModal);

        // Cerrar modal haciendo clic fuera de su contenido
        termsModal.addEventListener('click', (e) => {
            if (e.target === termsModal) {
                closeTermsModal();
            }
        });

        // Detectar si estamos en la URL correcta (/promociones) y abrir el modal
        window.addEventListener('DOMContentLoaded', () => {
            // Asumiendo que tu URL para promociones podría ser algo como
            // https://theumbrelaspalace.github.io/inicio/promociones.html
            // o simplemente un hash como #promociones en la URL principal
            // Si la URL es la misma página y solo quieres abrirlo si el usuario viene de un enlace externo con el hash:
            // if (window.location.hash === '#promociones') {
            //     openTermsModal();
            // }

            // Si tienes una página separada para promociones que redirige o quieres forzar el modal en cierta ruta:
            // Esto es más complejo con GitHub Pages sin un backend.
            // Para una URL como "www.umbrellaspalace.com/promociones", la forma más sencilla es que esa URL
            // redirija o contenga este mismo HTML con el modal pre-abierto.
            // Por ahora, el modal se abrirá SOLO al hacer clic en los enlaces dentro de esta misma página.
            // La línea `window.location.pathname.includes('/promociones')` probablemente no funcionará
            // como esperas con un single-page app en GitHub Pages, a menos que tengas un script de redirección.
            // La recomendación es usar el modal siempre activado por el clic o que la página de promociones
            // sea un archivo HTML separado que directamente muestre el modal al cargar.

            // Por ahora, eliminaremos la detección de URL para evitar confusión y nos basaremos en los clics.
            // Si realmente necesitas abrir el modal automáticamente desde una URL específica sin clic,
            // sería mejor tener una página HTML dedicada solo para esa URL y que el modal se abra al cargar la página.
        });
        // ===============================================
        // FIN JAVASCRIPT UNIFICADO
        // ===============================================

        // Función para llamar a la API de Gemini para recomendaciones (ya existía)
        async function getUmbrellaRecommendation(prompt) {
            const loadingIndicator = document.getElementById('loading-indicator');
            const recommendationResult = document.getElementById('recommendation-result');
            const recommendationText = document.getElementById('recommendation-text');

            loadingIndicator.classList.remove('hidden');
            recommendationResult.classList.add('hidden');
            recommendationText.textContent = '';

            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: `Basado en la siguiente descripción, sugiere una sombrilla de nuestra colección (Sombrilla Clásica Elegante, Sombrilla Compacta de Viaje, Sombrilla Invertida Innovadora). Responde con el nombre de la sombrilla y una breve razón. Descripción: ${prompt}` }] });

                const payload = { contents: chatHistory };
                // ¡IMPORTANTE! Reemplaza 'AIzaSyAxrgZrnfPG0I_BG8K1ZvBhbvGe6TILtHk' con tu clave API de Google AI Studio
                const apiKey = "AIzaSyAxrgZrnfPG0I_BG8K1ZvBhbvGe6TILtHk"; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    let errorMessage = `Error de la API de recomendación: ${response.status} ${response.statusText}.`;
                    if (response.status === 401 || response.status === 403) {
                        errorMessage = `Error: Problema de autenticación con la API de recomendación.`;
                    } else if (response.status === 429) {
                        errorMessage = `Error: Demasiadas solicitudes a la API de recomendación. Inténtalo de nuevo más tarde.`;
                    }
                    const errorData = await response.text();
                    console.error(errorMessage + " Respuesta cruda:", errorData);
                    throw new Error(errorMessage + ` Detalles: ${errorData.substring(0, 100)}...`);
                }

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    recommendationText.textContent = text;
                    recommendationResult.classList.remove('hidden');
                } else {
                    recommendationText.textContent = 'No se pudo generar una recomendación. Inténtalo de nuevo.';
                    recommendationResult.classList.remove('hidden');
                }
            } catch (error) {
                console.error("Error al obtener la recomendación de sombrilla:", error);
                recommendationText.textContent = `Ocurrió un error: ${error.message}. Por favor, inténtalo de nuevo.`;
                recommendationResult.classList.remove('hidden');
            } finally {
                loadingIndicator.classList.add('hidden');
            }
        }

        // Event Listener para el botón de recomendación (ya existía)
        document.getElementById('recommend-button').addEventListener('click', () => {
            const umbrellaNeeds = document.getElementById('umbrella-needs').value;
            if (umbrellaNeeds.trim() !== '') {
                getUmbrellaRecommendation(umbrellaNeeds);
            } else {
                showMessage('Por favor, describe tus necesidades para la sombrilla.');
            }
        });
    </script>
</body>
</html>
